<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Page Layout Viewer</title>
  <style>
    #layoutCanvas {
      position: relative;
      border: 2px solid #333;
      margin-top: 20px;
    }
    .item-box {
      position: absolute;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <h1>Page Layout Viewer</h1>
  <form id="layoutForm">
    <textarea id="jsonInput" rows="15" cols="100" placeholder="Paste JSON layout here..."></textarea><br>
    <button type="submit">Render Layout</button>
  </form>

  <div id="layoutCanvas"></div>

  <script>
    const categoryColors = {
      textFrame: "#F2D74E", // Yellow
      graphics: "#6BAED6",  // Blue
    };

    document.getElementById('layoutForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('jsonInput').value;
      try {
        const data = JSON.parse(input);
        renderLayout(data);
      } catch (err) {
        alert("Invalid JSON");
      }
    });

    function renderLayout(data) {
      const canvas = document.getElementById('layoutCanvas');
      canvas.innerHTML = '';
      canvas.style.width = data.width + 'px';
      canvas.style.height = data.height + 'px';

      data.items.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item-box';
        div.style.left = item.x + 'px';
        div.style.top = item.y + 'px';
        div.style.width = item.width + 'px';
        div.style.height = item.height + 'px';
        div.style.backgroundColor = categoryColors[item.category] || '#ccc';
        canvas.appendChild(div);
      });
    }

    {% if layout_data %}
      renderLayout({{ layout_data|safe }});
    {% endif %}
  </script>
</body>
</html>
